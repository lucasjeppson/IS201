<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Jungle Snake ‚Äî Classic Snake Game</title>
<style>
  /* ===== Overall page & jungle vibe ===== */
  :root{
    --bg1:#e6f7ec;
    --bg2:#d7f0de;
    --leaf1:#2b8a3e;
    --leaf2:#1f6f2e;
    --accent:#ff8c42;
    --panel:#ffffffcc;
    --muted:#0b3b24;
  }

  html,body{
    height:100%;
    margin:0;
    font-family: "Quicksand","Segoe UI",system-ui,Arial,sans-serif;
    background: radial-gradient(circle at 10% 10%, rgba(255,255,255,0.6), transparent 10%),
                linear-gradient(180deg, #e9fce8 0%, #dff7e0 45%, #cfeee0 100%);
    color:var(--muted);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
  }

  /* leafy vignette */
  body::after{
    content:"";
    position:fixed;
    pointer-events:none;
    inset:0;
    background-image:
      radial-gradient(800px 400px at 10% 0%, rgba(30,80,30,0.07), transparent 10%),
      radial-gradient(800px 400px at 90% 100%, rgba(20,60,20,0.06), transparent 10%);
    mix-blend-mode:multiply;
  }

  /* page layout */
  .wrap{
    max-width:980px;
    margin:18px auto;
    padding:18px;
  }

  header{
    display:flex;
    gap:18px;
    align-items:center;
    justify-content:space-between;
    margin-bottom:12px;
  }

  .brand{
    display:flex;
    gap:14px;
    align-items:center;
  }

  .logo{
    width:68px;
    height:68px;
    border-radius:12px;
    background:linear-gradient(135deg,var(--leaf1),var(--leaf2));
    display:grid;
    place-items:center;
    box-shadow:0 8px 18px rgba(15,60,20,0.18);
    color:#fff;
    font-weight:800;
    font-size:20px;
    transform:rotate(-8deg);
  }

  h1{
    margin:0;
    font-size:1.25rem;
    letter-spacing:0.4px;
    color:#083820;
  }

  .panel{
    background:var(--panel);
    border-radius:12px;
    padding:16px;
    box-shadow:0 8px 20px rgba(6,40,20,0.06);
    border:1px solid rgba(10,60,30,0.06);
  }

  main{
    display:flex;
    gap:18px;
    align-items:flex-start;
    flex-wrap:wrap;
  }

  /* left: game area */
  .game-area{
    flex:1 1 620px;
    min-width:300px;
  }

  canvas{
    width:100%;
    height:auto;
    display:block;
    border-radius:12px;
    background:
      linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02)),
      repeating-linear-gradient(45deg, rgba(255,255,255,0.02), rgba(255,255,255,0.02) 8px, rgba(0,0,0,0.02) 8px, rgba(0,0,0,0.02) 16px),
      linear-gradient(180deg,#dffbe1,#cdefd3);
    box-shadow: 0 10px 30px rgba(8,40,20,0.08);
    border: 6px solid rgba(3,70,30,0.08);
    background-size:cover;
  }

  /* right: controls & info */
  .sidebar{
    width:300px;
    min-width:240px;
    display:flex;
    flex-direction:column;
    gap:12px;
  }

  .stats{
    display:flex;
    gap:12px;
    align-items:center;
    justify-content:space-between;
  }

  .score{
    font-size:1.15rem;
    font-weight:700;
    color:var(--leaf2);
  }

  .highscore{
    font-size:0.95rem;
    color:#235a3a;
  }

  .controls{
    display:flex;
    gap:8px;
    align-items:center;
    justify-content:space-between;
    flex-wrap:wrap;
  }

  .btn{
    background:linear-gradient(180deg,#fff,#f0fff3);
    padding:10px 12px;
    border-radius:10px;
    border:1px solid rgba(80,140,80,0.08);
    cursor:pointer;
    font-weight:700;
    color:#0b4726;
    box-shadow:0 6px 14px rgba(6,40,20,0.06);
  }

  .btn:active{ transform:translateY(1px); }

  .range-wrap{
    display:flex;
    flex-direction:column;
    gap:6px;
    margin-top:6px;
  }

  input[type="range"]{
    width:100%;
    -webkit-appearance:none;
    height:10px;
    background:linear-gradient(90deg,#c2f0b5,#9fe6ff);
    border-radius:6px;
    outline:none;
  }
  input[type="range"]::-webkit-slider-thumb{
    -webkit-appearance:none;
    width:20px;height:20px;border-radius:50%;
    background:linear-gradient(135deg,#ffbb60,#ff8c42);
    box-shadow:0 4px 8px rgba(0,0,0,0.18);
  }

  label.small{ font-size:0.82rem; color:#155029; }

  .hint{ font-size:0.9rem; color:#14502f; opacity:0.95; }

  /* mobile directional pad (touch) */
  .dpad{
    display:grid;
    grid-template-columns:48px 48px 48px;
    grid-template-rows:48px 48px 48px;
    gap:6px;
    justify-content:center;
    align-items:center;
    margin-top:6px;
  }

  .dpad button{
    width:48px;height:48px;border-radius:10px;border:none;
    background:linear-gradient(180deg,#e9fff0,#c8f0d6);
    box-shadow:0 6px 12px rgba(10,60,30,0.06);
    cursor:pointer;
    font-weight:800;color:#0b4726;
  }

  .dpad .empty{ background:transparent; box-shadow:none; cursor:default; }

  /* footer */
  footer{
    margin-top:18px;
    color:#144029;
    font-size:0.85rem;
    text-align:center;
  }

  /* small screens */
  @media (max-width:880px){
    main{ flex-direction:column; }
    .sidebar{ width:100%; }
    canvas{ max-height:480px; }
  }
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo">JS</div>
        <div>
          <h1>Jungle Snake</h1>
          <div style="font-size:0.9rem;color:#1a5b34;">A cozy jungle-themed Snake game ‚Äî eat, grow, survive!</div>
        </div>
      </div>
      <div style="display:flex;gap:10px;align-items:center">
        <button class="btn" id="btnPause">Pause</button>
        <button class="btn" id="btnRestart">Restart</button>
      </div>
    </header>

    <main>
      <section class="game-area panel">
        <canvas id="gameCanvas" width="720" height="480"></canvas>
        <div style="margin-top:10px; display:flex; gap:10px; align-items:center; justify-content:space-between;">
          <div class="hint">Controls: Arrow keys or WASD (mobile: use pad)</div>
          <div class="hint">Goal: Eat fruit ‚Äî don't hit walls or yourself!</div>
        </div>
      </section>

      <aside class="sidebar">
        <div class="panel">
          <div class="stats">
            <div>
              <div class="score">Score: <span id="score">0</span></div>
              <div class="highscore">High Score: <span id="highscore">0</span></div>
            </div>
            <div style="text-align:right;">
              <div style="font-size:0.85rem;color:#15502f;">Speed</div>
              <div style="font-weight:800;color:#0b4726;font-size:1.1rem;" id="speedLabel">5</div>
            </div>
          </div>

          <div class="range-wrap" style="margin-top:14px">
            <label class="small">Game speed (1 = slow, 12 = fast)</label>
            <input type="range" id="speed" min="1" max="12" step="1" value="5">
          </div>

          <div style="margin-top:12px; display:flex; gap:8px; flex-wrap:wrap;">
            <button class="btn" id="btnEasy">Easy</button>
            <button class="btn" id="btnNormal">Normal</button>
            <button class="btn" id="btnHard">Hard</button>
          </div>
        </div>

        <div class="panel">
          <div style="font-weight:800;color:#0b4726;margin-bottom:8px;">Mobile controls</div>
          <div class="dpad" role="group" aria-label="dpad">
            <button class="empty" aria-hidden="true"></button>
            <button id="upBtn" title="Up">‚ñ≤</button>
            <button class="empty" aria-hidden="true"></button>

            <button id="leftBtn" title="Left">‚óÄ</button>
            <button class="empty center" aria-hidden="true"></button>
            <button id="rightBtn" title="Right">‚ñ∂</button>

            <button class="empty" aria-hidden="true"></button>
            <button id="downBtn" title="Down">‚ñº</button>
            <button class="empty" aria-hidden="true"></button>
          </div>
          <div style="margin-top:10px; font-size:0.9rem;color:#14502f;">Tap directional buttons to steer on touch devices.</div>
        </div>

        <div class="panel" style="text-align:center;">
          <div style="font-weight:800;color:#0b4726;margin-bottom:8px;">Theme</div>
          <div style="color:#15502f;">Jungle: leafy greens, warm fruit, soft shadows ‚Äî enjoy!</div>
        </div>
      </aside>
    </main>

    <footer>
      Built with JavaScript ‚Äî enjoy the jungle üêçüåø ‚Äî Press Space to Pause/Resume
    </footer>
  </div>

<script>
/* ===== Jungle Snake ‚Äî single-file JS =====
   - Grid-based snake on a canvas
   - Speed control via slider (1..12)
   - Score + localStorage high score
   - Keyboard (arrows/WASD) and touch dpad
   - Pause / Restart / Difficulty presets
*/

/* Canvas and grid settings */
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

/* Logical grid: adjust size for gameplay feel */
const COLS = 30;                   // horizontal cells
const ROWS = 20;                   // vertical cells
const CELL_W = Math.floor(canvas.width / COLS);
const CELL_H = Math.floor(canvas.height / ROWS);

/* Game state */
let snake = [{x: Math.floor(COLS/2), y: Math.floor(ROWS/2)}];
let dir = {x: 1, y: 0};            // current movement direction
let nextDir = {x: 1, y: 0};        // queued next direction
let food = null;
let score = 0;
let highscore = 0;
let isPaused = false;
let isGameOver = false;

/* Speed control: frames per second */
const speedInput = document.getElementById('speed');
const speedLabel = document.getElementById('speedLabel');
let fps = Number(speedInput.value); // frames per second (logical ticks)
let tickInterval = 1000 / fps;

/* Timing for main loop (requestAnimationFrame + accumulator) */
let lastTime = 0;
let acc = 0;

/* UI elements */
const scoreEl = document.getElementById('score');
const highEl = document.getElementById('highscore');
const btnPause = document.getElementById('btnPause');
const btnRestart = document.getElementById('btnRestart');
const btnEasy = document.getElementById('btnEasy');
const btnNormal = document.getElementById('btnNormal');
const btnHard = document.getElementById('btnHard');

/* Load highscore */
try {
  highscore = Number(localStorage.getItem('jungleSnakeHigh') || 0);
  highEl.textContent = highscore;
} catch(e){
  highscore = 0;
}

/* Initialize */
resetGame();
spawnFood();
updateUI();

/* Event listeners */
document.addEventListener('keydown', (e) => {
  if (e.key === ' '){
    togglePause();
    e.preventDefault();
    return;
  }
  const k = e.key.toLowerCase();
  // arrow keys + WASD
  if (k === 'arrowup' || k === 'w') setDirection(0, -1);
  else if (k === 'arrowdown' || k === 's') setDirection(0, 1);
  else if (k === 'arrowleft' || k === 'a') setDirection(-1, 0);
  else if (k === 'arrowright' || k === 'd') setDirection(1, 0);
});

btnPause.addEventListener('click', togglePause);
btnRestart.addEventListener('click', () => { resetGame(); });

btnEasy.addEventListener('click', ()=>{ speedInput.value = 3; speedInput.dispatchEvent(new Event('input')); });
btnNormal.addEventListener('click', ()=>{ speedInput.value = 5; speedInput.dispatchEvent(new Event('input')); });
btnHard.addEventListener('click', ()=>{ speedInput.value = 9; speedInput.dispatchEvent(new Event('input')); });

speedInput.addEventListener('input', (e)=>{
  fps = Number(e.target.value);
  speedLabel.textContent = fps;
  tickInterval = 1000 / fps;
});

/* Mobile dpad */
document.getElementById('upBtn').addEventListener('click', ()=> setDirection(0,-1));
document.getElementById('downBtn').addEventListener('click', ()=> setDirection(0,1));
document.getElementById('leftBtn').addEventListener('click', ()=> setDirection(-1,0));
document.getElementById('rightBtn').addEventListener('click', ()=> setDirection(1,0));

/* Direction setter with validation (no reverse) */
function setDirection(x,y){
  // prevent reversing into self except when length==1
  if (snake.length > 1 && (x === -dir.x && y === -dir.y)) return;
  nextDir = {x,y};
}

/* Game reset */
function resetGame(){
  snake = [{x: Math.floor(COLS/2), y: Math.floor(ROWS/2)}];
  dir = {x:1, y:0};
  nextDir = {x:1, y:0};
  score = 0;
  isPaused = false;
  isGameOver = false;
  btnPause.textContent = 'Pause';
  spawnFood();
  updateUI();
}

/* Spawn food in a free cell */
function spawnFood(){
  let tries = 0;
  while (tries < 500){
    const fx = Math.floor(Math.random()*COLS);
    const fy = Math.floor(Math.random()*ROWS);
    if (!snake.some(s => s.x === fx && s.y === fy)){
      food = {x:fx, y:fy};
      return;
    }
    tries++;
  }
  // fallback
  food = {x:0,y:0};
}

/* Update UI (score/highscore) */
function updateUI(){
  scoreEl.textContent = score;
  highEl.textContent = highscore;
}

/* Main loop using requestAnimationFrame and accumulator */
function gameLoop(time){
  if (!lastTime) lastTime = time;
  const dt = time - lastTime;
  lastTime = time;
  acc += dt;

  while (acc >= tickInterval){
    acc -= tickInterval;
    if (!isPaused && !isGameOver){
      tick();
    }
  }

  draw();
  requestAnimationFrame(gameLoop);
}
requestAnimationFrame(gameLoop);

/* Game tick ‚Äî move snake, check collisions */
function tick(){
  // apply queued direction
  dir = {...nextDir};

  // compute new head
  const head = {x: snake[0].x + dir.x, y: snake[0].y + dir.y};

  // wall collision -> game over
  if (head.x < 0 || head.x >= COLS || head.y < 0 || head.y >= ROWS){
    endGame();
    return;
  }

  // self collision
  if (snake.some(seg => seg.x === head.x && seg.y === head.y)){
    endGame();
    return;
  }

  // move: add new head
  snake.unshift(head);

  // eat food?
  if (food && head.x === food.x && head.y === food.y){
    score += 10;
    // small chance for bonus fruit (grow more)
    if (Math.random() < 0.12){
      score += 5;
    }
    spawnFood();
    // update highscore
    if (score > highscore){
      highscore = score;
      try { localStorage.setItem('jungleSnakeHigh', highscore); } catch(e){}
    }
    updateUI();
  } else {
    // normal move ‚Äî remove tail
    snake.pop();
  }
}

/* End game */
function endGame(){
  isGameOver = true;
  isPaused = true;
  btnPause.textContent = 'Paused';
  // small flash
  flashScreen();
}

/* Pause toggle */
function togglePause(){
  if (isGameOver){
    resetGame();
    return;
  }
  isPaused = !isPaused;
  btnPause.textContent = isPaused ? 'Resume' : 'Pause';
}

/* Draw everything */
function draw(){
  // clear
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // leafy background subtle pattern
  drawLeafyBackdrop();

  // draw grid softly (optional)
  drawGridLines();

  // draw food (fruit)
  if (food) drawFruit(food.x, food.y);

  // draw snake
  for (let i=snake.length-1;i>=0;i--){
    const seg = snake[i];
    drawSnakeSegment(seg.x, seg.y, i===0, i);
  }

  // if paused overlay
  if (isPaused){
    drawOverlay(isGameOver ? "Game Over ‚Äî Click Restart" : "Paused ‚Äî Press Space to Resume");
  }
}

/* draw leaf-backed gradient */
function drawLeafyBackdrop(){
  // subtle darker vignette corners
  const g = ctx.createLinearGradient(0,0,0,canvas.height);
  g.addColorStop(0, 'rgba(255,255,255,0.1)');
  g.addColorStop(1, 'rgba(200,255,220,0.06)');
  ctx.fillStyle = g;
  ctx.fillRect(0,0,canvas.width,canvas.height);
}

/* grid lines for subtle structure */
function drawGridLines(){
  ctx.save();
  ctx.globalAlpha = 0.06;
  ctx.strokeStyle = '#2b8a3e';
  ctx.lineWidth = 1;
  for (let x=0;x<=COLS;x++){
    ctx.beginPath();
    ctx.moveTo(x*CELL_W,0);
    ctx.lineTo(x*CELL_W,canvas.height);
    ctx.stroke();
  }
  for (let y=0;y<=ROWS;y++){
    ctx.beginPath();
    ctx.moveTo(0,y*CELL_H);
    ctx.lineTo(canvas.width,y*CELL_H);
    ctx.stroke();
  }
  ctx.restore();
}

/* Draw the snake segment ‚Äî head special */
function drawSnakeSegment(cx, cy, isHead, index){
  const x = cx * CELL_W;
  const y = cy * CELL_H;
  const pad = Math.min(CELL_W,CELL_H) * 0.08;
  const w = CELL_W - pad*2;
  const h = CELL_H - pad*2;
  // body color gradient
  const grd = ctx.createLinearGradient(x,y,x+w,y+h);
  grd.addColorStop(0, '#2fa24a'); // bright
  grd.addColorStop(1, '#1f6f2e'); // deeper
  ctx.fillStyle = grd;
  // rounded rectangle for nice look (leafy scale)
  roundRect(ctx, x+pad, y+pad, w, h, Math.min(w,h)*0.2, true, false);

  // subtle stripe
  ctx.save();
  ctx.globalAlpha = 0.12;
  ctx.fillStyle = '#ffffff';
  roundRect(ctx, x+pad+(w*0.06), y+pad+(h*0.06), w*0.88, h*0.42, Math.min(w,h)*0.16, true, false);
  ctx.restore();

  // eyes on head
  if (isHead){
    ctx.save();
    ctx.fillStyle = '#072a16';
    const eyeSize = Math.max(2, Math.min(CELL_W,CELL_H)*0.12);
    // orientation-based eye placement
    let ex1 = x + pad + w*0.2, ey1 = y + pad + h*0.28;
    let ex2 = x + pad + w*0.2, ey2 = y + pad + h*0.72;
    // adjust for direction (so eyes face forward)
    if (dir.x > 0){ ex1 = x + w - pad - w*0.25; ex2 = x + w - pad - w*0.25; }
    else if (dir.x < 0){ ex1 = x + pad + w*0.25; ex2 = x + pad + w*0.25; }
    else if (dir.y > 0){ ey1 = y + h - pad - h*0.25; ey2 = y + h - pad - h*0.12; ex1 = x + pad + w*0.28; ex2 = x + pad + w*0.72; }
    else if (dir.y < 0){ ey1 = y + pad + h*0.14; ey2 = y + pad + h*0.28; ex1 = x + pad + w*0.28; ex2 = x + pad + w*0.72; }

    ctx.beginPath(); ctx.arc(ex1, ey1, eyeSize, 0, Math.PI*2); ctx.fill();
    ctx.beginPath(); ctx.arc(ex2, ey2, eyeSize, 0, Math.PI*2); ctx.fill();
    ctx.restore();
  }
}

/* Draw fruit (orange with leaf) */
function drawFruit(cx, cy){
  const x = cx * CELL_W;
  const y = cy * CELL_H;
  const pad = Math.min(CELL_W,CELL_H) * 0.12;
  const size = Math.min(CELL_W,CELL_H) - pad*2;
  const cxp = x + pad + size/2;
  const cyp = y + pad + size/2;

  // fruit body
  ctx.save();
  const g = ctx.createRadialGradient(cxp - size*0.18, cyp - size*0.18, 2, cxp, cyp, size);
  g.addColorStop(0, '#ffd19a');
  g.addColorStop(0.6, '#ffb351');
  g.addColorStop(1, '#ff8c42');
  ctx.fillStyle = g;
  ctx.beginPath();
  ctx.ellipse(cxp, cyp, size*0.46, size*0.46, 0, 0, Math.PI*2);
  ctx.fill();

  // leaf
  ctx.fillStyle = '#2f8a3f';
  ctx.beginPath();
  ctx.ellipse(cxp - size*0.18, cyp - size*0.6, size*0.18, size*0.12, -0.6, 0, Math.PI*2);
  ctx.fill();
  ctx.restore();
}

/* Overlay text (pause/game over) */
function drawOverlay(text){
  ctx.save();
  ctx.fillStyle = 'rgba(3,30,18,0.28)';
  ctx.fillRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle = '#fff';
  ctx.font = 'bold 28px system-ui, Arial';
  ctx.textAlign = 'center';
  ctx.textBaseline = 'middle';
  ctx.fillText(text, canvas.width/2, canvas.height/2);
  ctx.restore();
}

/* Flash effect on game over */
function flashScreen(){
  const orig = canvas.style.boxShadow;
  canvas.style.boxShadow = '0 0 40px 18px rgba(255,120,64,0.16), inset 0 0 40px rgba(255,120,64,0.06)';
  setTimeout(()=>{ canvas.style.boxShadow = orig; }, 350);
}

/* Utility: rounded rect */
function roundRect(ctx,x,y,w,h,r, fill, stroke){
  if (typeof r === 'undefined') r = 5;
  ctx.beginPath();
  ctx.moveTo(x + r, y);
  ctx.arcTo(x + w, y, x + w, y + h, r);
  ctx.arcTo(x + w, y + h, x, y + h, r);
  ctx.arcTo(x, y + h, x, y, r);
  ctx.arcTo(x, y, x + w, y, r);
  ctx.closePath();
  if (fill) ctx.fill();
  if (stroke) ctx.stroke();
}

/* Resize canvas element to keep crisp cells on high-dpi devices */
function adjustCanvasForDPI(){
  const ratio = Math.max(1, window.devicePixelRatio || 1);
  // Use logical canvas width/height matching CSS size*ratio to keep cell math consistent.
  const styleW = canvas.clientWidth;
  const styleH = canvas.clientHeight;
  canvas.width = Math.floor(styleW * ratio);
  canvas.height = Math.floor(styleH * ratio);
  // recompute cell size based on new pixel dims
  // (Note: we keep logical COLS/ROWS same)
  // Because CELL_W/ H were const earlier, we compute scaled values for drawing:
  // We'll recompute drawing scale via ctx.setTransform
  ctx.setTransform(canvas.width / (COLS * CELL_W) * (CELL_W / CELL_W), 0, 0, canvas.height / (ROWS * CELL_H) * (CELL_H / CELL_H), 0, 0);
  // Instead of messing with transforms, simpler approach: we will re-render with previous constant CELL_W/CELL_H mapped to current pixel size:
  // But for simplicity, we won't change variables ‚Äî cells will scale because CSS scales canvas; it's acceptable.
}
// call once on load & on resize
window.addEventListener('resize', ()=>{ /* placeholder if responsive tuning needed */ });

/* Initialize speed label */
speedLabel.textContent = fps;

/* Helper: constrain snake spawn and random */
function randInt(max){ return Math.floor(Math.random()*max); }

/* Start with a draw */
draw();

/* Additional UX: clicking canvas resumes if paused */
canvas.addEventListener('click', ()=>{ if (isPaused && !isGameOver) togglePause(); });

/* Save highscore when page is closed */
window.addEventListener('beforeunload', ()=> {
  try { localStorage.setItem('jungleSnakeHigh', highscore); } catch(e){}
});

/* Keep keys from scrolling page */
window.addEventListener('keydown', (e) => {
  if (['ArrowUp','ArrowDown','ArrowLeft','ArrowRight',' '].includes(e.key)){
    e.preventDefault();
  }
});

/* End of file */
</script>
</body>
</html>
